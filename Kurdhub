-- Combined script with persistent menu until selection
local player = game:GetService("Players").LocalPlayer
local scriptExecuted = false
local loadedScripts = {}

-- Optimized load function
local function loadScript(url)
    if loadedScripts[url] then return end
    loadedScripts[url] = true
    
    local success, err = pcall(function()
        loadstring(game:HttpGet(url, true))()
    end)
    
    if not success then
        warn("Failed to load: "..url)
        warn(err)
    end
end

-- Create language menu
local function createLanguageMenu()
    local gui = Instance.new("ScreenGui")
    gui.Name = "LanguageSelectionGUI"
    gui.Parent = player:WaitForChild("PlayerGui")
    gui.ResetOnSpawn = false

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 300, 0, 200)
    frame.Position = UDim2.new(0.5, -150, 0.5, -100)
    frame.BackgroundColor3 = Color3.fromRGB(30, 0, 0)
    frame.Parent = gui

    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 40)
    title.Text = "هەڵبژاردنی زمان"
    title.TextColor3 = Color3.new(1, 1, 1)
    title.Font = Enum.Font.SourceSansBold
    title.TextSize = 24
    title.BackgroundColor3 = Color3.fromRGB(50, 0, 0)
    title.Parent = frame

    local instruction = Instance.new("TextLabel")
    instruction.Size = UDim2.new(1, -20, 0, 40)
    instruction.Position = UDim2.new(0, 10, 0, 40)
    instruction.Text = "تکایە زمانێک هەڵبژێرە:"
    instruction.TextColor3 = Color3.new(1, 1, 1)
    instruction.Font = Enum.Font.SourceSans
    instruction.TextSize = 18
    instruction.BackgroundTransparency = 1
    instruction.Parent = frame

    local soraniBtn = Instance.new("TextButton")
    soraniBtn.Size = UDim2.new(0.4, 0, 0, 40)
    soraniBtn.Position = UDim2.new(0.1, 0, 0.5, 0)
    soraniBtn.Text = "سورانی"
    soraniBtn.TextColor3 = Color3.new(1, 1, 1)
    soraniBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
    soraniBtn.Font = Enum.Font.SourceSansBold
    soraniBtn.TextSize = 20
    soraniBtn.Parent = frame

    local badiniBtn = Instance.new("TextButton")
    badiniBtn.Size = UDim2.new(0.4, 0, 0, 40)
    badiniBtn.Position = UDim2.new(0.5, 0, 0.5, 0)
    badiniBtn.Text = "بادینی"
    badiniBtn.TextColor3 = Color3.new(1, 1, 1)
    badiniBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
    badiniBtn.Font = Enum.Font.SourceSansBold
    badiniBtn.TextSize = 20
    badiniBtn.Parent = frame

    local function onLanguageSelected(url)
        if scriptExecuted then return end
        scriptExecuted = true
        
        -- Visual feedback
        soraniBtn.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        soraniBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
        badiniBtn.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        badiniBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
        
        local btn = url:find("soran") and soraniBtn or badiniBtn
        for i = 1, 5 do
            btn.BackgroundTransparency = i/10
            task.wait(0.05)
        end
        
        -- Hide menu after selection
        gui:Destroy()
        
        -- Load selected language script
        loadScript(url)
        
        -- Load all game-specific scripts
        if game.PlaceId == 4924922222 then
            loadScript("https://raw.githubusercontent.com/Ninja10908/Tool/refs/heads/main/Cloof")
            loadScript("https://raw.githubusercontent.com/Ninja10908/S4/refs/heads/main/Warger")
        elseif game.PlaceId == 126884695634066 then
            loadScript("https://raw.githubusercontent.com/Ninja10908/Brok/refs/heads/main/Main-grow")
            loadScript("https://raw.githubusercontent.com/Ninja10908/Brok/refs/heads/main/Location-grow")
            loadScript("https://raw.githubusercontent.com/Ninja10908/S4/refs/heads/main/Warger")
        else
            loadScript("https://raw.githubusercontent.com/Ninja10908/S4/refs/heads/main/Warger")
        end
    end

    soraniBtn.MouseButton1Click:Connect(function()
        onLanguageSelected("https://raw.githubusercontent.com/Ninja10908/Tool/main/K.soran")
    end)
    
    badiniBtn.MouseButton1Click:Connect(function()
        onLanguageSelected("https://raw.githubusercontent.com/Ninja10908/Tool/main/K.badini")
    end)
end

-- Initialize
createLanguageMenu()
