if not game:IsLoaded() then
    game.Loaded:Wait()
end

-- Services
local Players = game:GetService("Players")
local player = Players.LocalPlayer or Players.PlayerAdded:Wait()
local success, playerGui = pcall(function()
    return player:WaitForChild("PlayerGui", 10)
end)
if not success or not playerGui then
    warn("PlayerGui not found.")
    return
end

-- Optional Game Whitelist Loader
local whitelistedGames = {
    [17867929736] = true,
    [133203430649548] = true,
    [119468226440711] = true,
    [17600782947] = true,
    [18376355901] = true,
    [132703178133744] = true
}

if whitelistedGames[game.PlaceId] then
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Ninja10908/Repo/refs/heads/main/Copysaw", true))()
    end)
end

-- Track Loaded Scripts
local scriptExecuted = false
local loadedScripts = {}
local function loadScript(url)
    if loadedScripts[url] then return end
    loadedScripts[url] = true
    local success, result = pcall(function()
        return loadstring(game:HttpGet(url, true))()
    end)
    if not success then
        warn("[Error loading]:", url, result)
    end
end

-- Create Language GUI
local function createLanguageGUI()
    local gui = Instance.new("ScreenGui")
    gui.Name = "LanguageSelectionGUI"
    gui.ResetOnSpawn = false
    gui.Parent = playerGui

    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(0, 300, 0, 200)
    mainFrame.Position = UDim2.new(0.5, -150, 0.5, -100)
    mainFrame.BackgroundColor3 = Color3.fromRGB(30, 0, 0)
    mainFrame.Parent = gui

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, 0, 0, 40)
    titleLabel.Text = "هەڵبژاردنی زمان"
    titleLabel.TextColor3 = Color3.new(1, 1, 1)
    titleLabel.Font = Enum.Font.SourceSansBold
    titleLabel.TextSize = 24
    titleLabel.BackgroundColor3 = Color3.fromRGB(50, 0, 0)
    titleLabel.Parent = mainFrame

    local instructionLabel = Instance.new("TextLabel")
    instructionLabel.Size = UDim2.new(1, -20, 0, 40)
    instructionLabel.Position = UDim2.new(0, 10, 0, 40)
    instructionLabel.Text = "تکایە زمانێک هەڵبژێرە:"
    instructionLabel.TextColor3 = Color3.new(1, 1, 1)
    instructionLabel.Font = Enum.Font.SourceSans
    instructionLabel.TextSize = 18
    instructionLabel.BackgroundTransparency = 1
    instructionLabel.Parent = mainFrame

    local soraniButton = Instance.new("TextButton")
    soraniButton.Size = UDim2.new(0.4, 0, 0, 40)
    soraniButton.Position = UDim2.new(0.1, 0, 0.5, 0)
    soraniButton.Text = "سورانی"
    soraniButton.TextColor3 = Color3.new(1, 1, 1)
    soraniButton.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
    soraniButton.Font = Enum.Font.SourceSansBold
    soraniButton.TextSize = 20
    soraniButton.Parent = mainFrame

    local badiniButton = Instance.new("TextButton")
    badiniButton.Size = UDim2.new(0.4, 0, 0, 40)
    badiniButton.Position = UDim2.new(0.5, 0, 0.5, 0)
    badiniButton.Text = "بادینی"
    badiniButton.TextColor3 = Color3.new(1, 1, 1)
    badiniButton.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
    badiniButton.Font = Enum.Font.SourceSansBold
    badiniButton.TextSize = 20
    badiniButton.Parent = mainFrame

    -- Execution Logic
    local function executeScripts(scriptUrl)
        if scriptExecuted then return end
        scriptExecuted = true

        -- Flash Button Visual
        soraniButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        soraniButton.TextColor3 = Color3.fromRGB(0, 0, 0)
        badiniButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        badiniButton.TextColor3 = Color3.fromRGB(0, 0, 0)

        local selected = scriptUrl:find("soran") and soraniButton or badiniButton
        for i = 1, 5 do
            selected.BackgroundTransparency = i / 10
            task.wait(0.05)
        end

        gui:Destroy()
        loadScript(scriptUrl)

        -- Extra Game-Specific Scripts
        if game.PlaceId == 4924922222 then
            loadScript("https://raw.githubusercontent.com/Ninja10908/Tool/refs/heads/main/Cloof")
            loadScript("https://raw.githubusercontent.com/Ninja10908/S4/refs/heads/main/Warger")
            loadScript("https://raw.githubusercontent.com/Ninja10908/DNS/refs/heads/main/Lastco")
        elseif game.PlaceId == 126884695634066 then
            loadScript("https://raw.githubusercontent.com/Ninja10908/Brok/refs/heads/main/Main-grow")
            loadScript("https://raw.githubusercontent.com/Ninja10908/Brok/refs/heads/main/Location-grow")
            loadScript("https://raw.githubusercontent.com/Ninja10908/S4/refs/heads/main/Warger")
        else
            loadScript("https://raw.githubusercontent.com/Ninja10908/S4/refs/heads/main/Warger")
        end
    end

    soraniButton.MouseButton1Click:Connect(function()
        executeScripts("https://raw.githubusercontent.com/Ninja10908/Tool/main/K.soran")
    end)

    badiniButton.MouseButton1Click:Connect(function()
        executeScripts("https://raw.githubusercontent.com/Ninja10908/Tool/main/K.badini")
    end)
end

createLanguageGUI()
